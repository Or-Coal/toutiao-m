"use strict";(self["webpackChunktoutiao_m"]=self["webpackChunktoutiao_m"]||[]).push([[297],{974:function(t,s,i){i.r(s),i.d(s,{default:function(){return u}});var n=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("div",{staticClass:"search-header"},[i("van-icon",{staticClass:"goback",attrs:{name:"arrow-left",color:"white",size:"0.48rem"},on:{click:function(s){return t.$router.back()}}}),i("van-search",{directives:[{name:"fofo",rawName:"v-fofo"}],attrs:{placeholder:"请输入搜索关键词",background:"pink",shape:"round"},on:{input:t.inputFn,search:t.searchFn},model:{value:t.kw,callback:function(s){t.kw="string"===typeof s?s.trim():s},expression:"kw"}})],1),0!==t.kw.length?i("div",{staticClass:"sugg-list"},t._l(t.LianXiangList,(function(s,n){return i("div",{key:n,staticClass:"sugg-item",domProps:{innerHTML:t._s(t.lightFn(s,t.kw))},on:{click:function(i){return t.suggestClickFn(s)}}})})),0):i("div",{staticClass:"search-history"},[i("van-cell",{attrs:{title:"搜索历史"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[i("van-icon",{staticClass:"search-icon",attrs:{name:"delete"},on:{click:t.delFn}})]},proxy:!0}])}),i("div",{staticClass:"history-list"},t._l(t.history,(function(s,n){return i("span",{key:n,staticClass:"history-item",on:{click:function(i){return t.historyClickFn(s)}}},[t._v(t._s(s))])})),0)],1)])},e=[],a=i(32),r=i(5922),o={name:"SearchIndex",data(){return{kw:"",timer:null,LianXiangList:[],history:JSON.parse((0,r.cF)("his"))||[]}},methods:{inputFn(){0===this.kw.length?this.LianXiangList=[]:(clearTimeout(this.timer),this.timer=setTimeout((async()=>{const t=await(0,a.TV)({theLianXiang:this.kw});this.LianXiangList=t.data.data.options,console.log(t)}),300))},lightFn(t,s){const i=new RegExp(s,"ig");return t.replace(i,(t=>`<span style="color:red;">${t}</span>`))},moveFn(t){setTimeout((()=>{this.$router.push({path:`/searchresult${t}`})}),0)},searchFn(){this.kw.length>0&&(this.history.push(this.kw),this.moveFn(this.kw))},suggestClickFn(t){this.history.push(t),this.moveFn(t)},historyClickFn(t){this.moveFn(t)},delFn(){this.history=[]}},watch:{history:{deep:!0,handler(){const t=new Set(this.history),s=Array.from(t);(0,r.po)("his",JSON.stringify(s))}}}},c=o,h=i(3736),l=(0,h.Z)(c,n,e,!1,null,"0abdddfa",null),u=l.exports}}]);
//# sourceMappingURL=297.1e250209.js.map