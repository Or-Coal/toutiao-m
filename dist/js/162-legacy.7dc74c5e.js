(self["webpackChunktoutiao_m"]=self["webpackChunktoutiao_m"]||[]).push([[162],{7018:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("van-cell",{scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"title-box"},[t("span",[e._v(e._s(e.alt.title))]),1===e.alt.cover.type?t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.alt.cover.images[0],expression:"alt.cover.images[0]"}],staticClass:"thumb",attrs:{alt:""}}):e._e()]),e.alt.cover.type>1?t("div",{staticClass:"thumb-box"},e._l(e.alt.cover.images,(function(e,n){return t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"imgUrl"}],key:n,staticClass:"thumb",attrs:{alt:""}})})),0):e._e()]},proxy:!0},{key:"label",fn:function(){return[t("div",{staticClass:"label-box"},[t("div",[t("span",[e._v(e._s(e.alt.aut_name))]),t("span",[e._v(e._s(e.alt.comm_count)+"评论")]),t("span",[e._v(e._s(e.formatTime(e.alt.pubdate)))])]),e.isShow?t("van-icon",{attrs:{name:"cross"},on:{click:function(n){n.stopPropagation(),e.show=!0}}}):e._e()],1)]},proxy:!0}])}),t("van-action-sheet",{attrs:{actions:e.actions,"get-container":"body","cancel-text":e.bottomText},on:{select:e.onSelect,cancel:e.quxiaoshijian,close:e.closeFn},model:{value:e.show,callback:function(n){e.show=n},expression:"show"}})],1)},i=[],r=(t(8309),t(1709)),s=[{name:"不感兴趣"},{name:"反馈垃圾内容"}],o=[{value:0,name:"其他问题"},{value:1,name:"标题夸张"},{value:2,name:"低俗色情"},{value:3,name:"错别字多"},{value:4,name:"旧闻重复"},{value:5,name:"广告软文"},{value:6,name:"内容不实"},{value:7,name:"涉嫌违法犯罪"},{value:8,name:"授权"}],c={data:function(){return{show:!1,actions:s,bottomText:"取消"}},props:{alt:Object,isShow:{type:Boolean,default:!0}},methods:{formatTime:r.S,onSelect:function(e,n){console.log(e),"反馈垃圾内容"===e.name?(this.actions=o,this.bottomText="返回"):"不感兴趣"===e.name?(this.$emit("disLikeEV",this.alt.art_id),this.show=!1):(this.$emit("reportEV",this.alt.art_id,e.value),this.show=!1)},quxiaoshijian:function(){"返回"===this.bottomText&&(this.show=!0,this.actions=s,this.bottomText="取消")},closeFn:function(){this.actions=s,this.bottomText="取消"}},created:function(){console.log(this.alt)}},l=c,u=t(3736),h=(0,u.Z)(l,a,i,!1,null,"f9ec06a0",null),d=h.exports},5877:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var a=function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("div",[a("div",[a("van-nav-bar",{attrs:{fixed:""},scopedSlots:e._u([{key:"left",fn:function(){return[a("img",{staticClass:"logo",attrs:{src:t(6949),alt:""}})]},proxy:!0},{key:"right",fn:function(){return[a("van-icon",{staticClass:"icon",attrs:{name:"search",size:"0.48rem"},on:{click:e.moveSearchPageFn}})]},proxy:!0}])})],1),a("div",[a("van-tabs",{attrs:{animated:"",sticky:"","offset-top":"1.125rem"},on:{change:e.channelChangeFn},model:{value:e.channel,callback:function(n){e.channel=n},expression:"channel"}},e._l(e.userChannelList,(function(n){return a("van-tab",{key:n.id,attrs:{title:n.name,name:n.id}},[a("ArticleList",{attrs:{channel:e.channel}})],1)})),1),a("van-icon",{staticClass:"moreChannels",attrs:{name:"plus",size:"0.37333334rem"},on:{click:e.plusClickFn}})],1),a("van-popup",{staticClass:"channle_popup",attrs:{"get-container":"body"},model:{value:e.show,callback:function(n){e.show=n},expression:"show"}},[a("ChanneIEdit",{ref:"editRef",attrs:{userList:e.userChannelList,allList:e.unCheckChanneList},on:{addchannelEV:e.addchannelFn,removechannelEV:e.removechannelFn,closeEv:e.closeFn},model:{value:e.channel,callback:function(n){e.channel=n},expression:"channel"}})],1)],1)},i=[],r=t(3019),s=t(6198),o=(t(8975),t(7327),t(1539),t(1249),t(8309),t(4553),t(561),t(32)),c=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(n){e.isLoading=n},expression:"isLoading"}},[t("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了","immediate-check":!1,offset:"50"},on:{load:e.onLoad},model:{value:e.loading,callback:function(n){e.loading=n},expression:"loading"}},e._l(e.wenzhanglist,(function(n){return t("ArticleTtem",{key:n.art_id,attrs:{alt:n},on:{disLikeEV:e.disLikeFn,reportEV:e.reportFn},nativeOn:{click:function(t){return e.tiaozhuanwenzhnagxinagqing(n.art_id)}}})})),1)],1)],1)},l=[],u=t(4479),h=(t(2222),t(7018)),d=t(8935),m=t(7037);d.Z.use(m.Z);var f={data:function(){return{wenzhanglist:[],loading:!1,finished:!1,thetime:(new Date).getTime(),isLoading:!0}},props:["channel"],created:function(){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.getArticleListFn();case 1:case"end":return n.stop()}}),n)})))()},methods:{getArticleListFn:function(){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,o.vL)({channel_id:e.channel,timestamp:e.thetime});case 2:t=n.sent,console.log(t),e.wenzhanglist=[].concat((0,u.Z)(e.wenzhanglist),(0,u.Z)(t.data.data.results)),e.thetime=t.data.data.pre_timestamp,e.loading=!1,null===t.data.data.results.pre_timestamp&&(e.finished=!0),e.isLoading=!1;case 9:case"end":return n.stop()}}),n)})))()},onLoad:function(){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.getArticleListFn();case 1:case"end":return n.stop()}}),n)})))()},onRefresh:function(){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.wenzhanglist=[],e.thetime=(new Date).getTime(),e.getArticleListFn();case 3:case"end":return n.stop()}}),n)})))()},disLikeFn:function(e){return(0,s.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,o.AJ)({artId:e});case 2:(0,m.Z)({type:"success",message:"反馈成功"});case 3:case"end":return n.stop()}}),n)})))()},reportFn:function(e,n){return(0,s.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,o.sk)({artId:e,type:n});case 2:(0,m.Z)({type:"success",message:"举报成功"});case 3:case"end":return t.stop()}}),t)})))()},tiaozhuanwenzhnagxinagqing:function(e){this.$router.push({path:"/articledetail?art_id=".concat(e)})}},components:{ArticleTtem:h.Z}},p=f,v=t(3736),g=(0,v.Z)(p,c,l,!1,null,"62f9d2c8",null),w=g.exports,x=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("van-nav-bar",{attrs:{title:"频道管理"},scopedSlots:e._u([{key:"right",fn:function(){return[t("van-icon",{attrs:{name:"cross",size:"0.37333334rem",color:"white"},on:{click:e.closeFn}})]},proxy:!0}])}),t("div",{staticClass:"my-channel-box"},[t("div",{staticClass:"channel-title"},[t("span",[e._v("我的频道 "),t("span",{staticClass:"small-title"},[e._v(" 点击"+e._s(e.isEdit?"删除":"进入")+"频道 ")])]),t("span",{on:{click:e.bianjidianji}},[e._v(e._s(e.isEdit?"完成":"删除"))])]),t("van-row",{attrs:{type:"flex"}},e._l(e.userList,(function(n){return t("van-col",{key:n.id,attrs:{span:"6"},on:{click:function(t){return e.wodepindaoshanchuFn(n)}}},[t("div",{staticClass:"channel-item van-hairline--surround"},[e._v(" "+e._s(n.name)+" "),t("van-badge",{directives:[{name:"show",rawName:"v-show",value:e.isEdit&&0!==n.id,expression:"isEdit && obj.id!==0"}],staticClass:"cross-badge xiaochuhengse",attrs:{color:"transparnet"},scopedSlots:e._u([{key:"content",fn:function(){return[t("van-icon",{staticClass:"badge-icon",attrs:{name:"cross",color:"#cfcfcf",size:"0.32rem"}})]},proxy:!0}],null,!0)})],1)])})),1)],1),t("div",{staticClass:"more-channel-box"},[e._m(0),t("van-row",{attrs:{type:"flex"}},e._l(e.allList,(function(n){return t("van-col",{key:n.id,attrs:{span:"6"},on:{click:function(t){return e.moreFn(n)}}},[t("div",{staticClass:"channel-item van-hairline--surround"},[e._v(e._s(n.name)+" ")])])})),1)],1)],1)},b=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"channel-title"},[t("span",[e._v("点击添加更多频道")])])}],_={props:{userList:Array,allList:Array},data:function(){return{isEdit:!1}},methods:{bianjidianji:function(){this.isEdit=!this.isEdit},moreFn:function(e){this.isEdit&&this.$emit("addchannelEV",e)},wodepindaoshanchuFn:function(e){this.isEdit?0!==e.id&&this.$emit("removechannelEV",e):(this.$emit("closeEv"),this.$emit("input",e.id))},closeFn:function(){this.$emit("closeEv")}}},k=_,y=(0,v.Z)(k,x,b,!1,null,"b0fce906",null),C=y.exports,L={name:"IndexHome",data:function(){return{channel:0,userChannelList:[],allChannelList:[],wenzhanglist:[],show:!1,channelScrollTobj:{}}},activated:function(){window.addEventListener("scroll",this.scrollFn),document.documentElement.scrollTop=this.$route.meta.scrollT},deactivated:function(){window.removeEventListener("scroll",this.scrollFn)},methods:{channelChangeFn:function(){var e=this;this.$nextTick((function(){document.documentElement.scrollTop=e.channelScrollTobj[e.channel]}))},plusClickFn:function(){this.show=!0},addchannelFn:function(e){var n=this;return(0,s.Z)(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.userChannelList.push(e),a=n.userChannelList.filter((function(e){return 0!==e.id})),i=a.map((function(e,n){var t=(0,r.Z)({},e);return delete t.name,t.seq=n,t})),t.next=5,(0,o.Aj)({channels:i});case 5:case"end":return t.stop()}}),t)})))()},removechannelFn:function(e){var n=this;return(0,s.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=n.userChannelList.findIndex((function(n){return n.id===e.id})),n.userChannelList.splice(a,1),t.next=4,(0,o.Df)({channelID:e.id});case 4:case"end":return t.stop()}}),t)})))()},closeFn:function(){this.show=!1,this.$refs.editRef.isEdit=!1},moveSearchPageFn:function(){this.$router.push("/search")},scrollFn:function(){this.$route.meta.scrollT=document.documentElement.scrollTop,this.channelScrollTobj[this.channel]=document.documentElement.scrollTop}},components:{ArticleList:w,ChanneIEdit:C},created:function(){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function n(){var t,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,o.z5)();case 2:return t=n.sent,e.userChannelList=t.data.data.channels,n.next=6,(0,o.bE)();case 6:a=n.sent,e.allChannelList=a.data.data.channels;case 8:case"end":return n.stop()}}),n)})))()},computed:{unCheckChanneList:function(){var e=this;return this.allChannelList.filter((function(n){return-1===e.userChannelList.findIndex((function(e){return e.id===n.id}))}))}}},E=L,F=(0,v.Z)(E,a,i,!1,null,"3dcdb746",null),j=F.exports},4553:function(e,n,t){"use strict";var a=t(2109),i=t(2092).findIndex,r=t(1223),s="findIndex",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),a({target:"Array",proto:!0,forced:o},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(s)},9337:function(e,n,t){var a=t(2109),i=t(9781),r=t(3887),s=t(5656),o=t(1236),c=t(6135);a({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var n,t,a=s(e),i=o.f,l=r(a),u={},h=0;while(l.length>h)t=i(a,n=l[h++]),void 0!==t&&c(u,n,t);return u}})},6949:function(e,n,t){"use strict";e.exports=t.p+"img/logo.d0d391a4.png"},3019:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});t(7941),t(2526),t(7327),t(1539),t(5003),t(4747),t(9337);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}}}]);
//# sourceMappingURL=162-legacy.7dc74c5e.js.map