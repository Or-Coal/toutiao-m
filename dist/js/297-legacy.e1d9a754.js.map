{"version":3,"file":"js/297-legacy.e1d9a754.js","mappings":"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","sources":["webpack://toutiao-m/./src/views/Search/index.vue?261b","webpack://toutiao-m/src/views/Search/index.vue","webpack://toutiao-m/./src/views/Search/index.vue?f06b","webpack://toutiao-m/./src/views/Search/index.vue","webpack://toutiao-m/./node_modules/core-js/internals/array-from.js","webpack://toutiao-m/./node_modules/core-js/internals/call-with-safe-iteration-closing.js","webpack://toutiao-m/./node_modules/core-js/modules/es.array.from.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"search-header\"},[_c('van-icon',{staticClass:\"goback\",attrs:{\"name\":\"arrow-left\",\"color\":\"white\",\"size\":\"0.48rem\"},on:{\"click\":function($event){return _vm.$router.back()}}}),_c('van-search',{directives:[{name:\"fofo\",rawName:\"v-fofo\"}],attrs:{\"placeholder\":\"请输入搜索关键词\",\"background\":\"pink\",\"shape\":\"round\"},on:{\"input\":_vm.inputFn,\"search\":_vm.searchFn},model:{value:(_vm.kw),callback:function ($$v) {_vm.kw=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"kw\"}})],1),(_vm.kw.length !== 0)?_c('div',{staticClass:\"sugg-list\"},_vm._l((_vm.LianXiangList),function(a,index){return _c('div',{key:index,staticClass:\"sugg-item\",domProps:{\"innerHTML\":_vm._s(_vm.lightFn(a,_vm.kw))},on:{\"click\":function($event){return _vm.suggestClickFn(a)}}})}),0):_c('div',{staticClass:\"search-history\"},[_c('van-cell',{attrs:{\"title\":\"搜索历史\"},scopedSlots:_vm._u([{key:\"right-icon\",fn:function(){return [_c('van-icon',{staticClass:\"search-icon\",attrs:{\"name\":\"delete\"},on:{\"click\":_vm.delFn}})]},proxy:true}])}),_c('div',{staticClass:\"history-list\"},_vm._l((_vm.history),function(str,index){return _c('span',{key:index,staticClass:\"history-item\",on:{\"click\":function($event){return _vm.historyClickFn(str)}}},[_vm._v(_vm._s(str))])}),0)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n      <!-- 搜索页面头部 -->\r\n    <div class=\"search-header\">\r\n<van-icon name=\"arrow-left\" color=\"white\" size=\"0.48rem\" class=\"goback\" @click=\"$router.back()\" />\r\n<!-- 搜索组件 -->\r\n<van-search placeholder=\"请输入搜索关键词\" background=\"pink\" shape=\"round\"  v-fofo v-model.trim=\"kw\" @input=\"inputFn\" @search=\"searchFn\"/>\r\n      </div>\r\n      <!-- 搜索建议列表样式 -->\r\n      <div class=\"sugg-list\" v-if=\"kw.length !== 0\">\r\n        <div class=\"sugg-item\" v-for=\"(a,index) in LianXiangList\" :key=\"index\" v-html=\"lightFn(a,kw)\" @click=\"suggestClickFn(a)\">\r\n        </div>\r\n      </div>\r\n      <!-- 搜索历史 -->\r\n      <div class=\"search-history\" v-else>\r\n        <!-- 标题 -->\r\n        <van-cell title=\"搜索历史\">\r\n          <!-- 使用 right-icon 插槽来定义右侧图标 -->\r\n          <template #right-icon>\r\n           <van-icon name=\"delete\" class=\"search-icon\" @click=\"delFn\"/>\r\n          </template>\r\n        </van-cell>\r\n        <!-- 历史列表 -->\r\n        <div class=\"history-list\">\r\n          <span class=\"history-item\" v-for=\"(str,index) in history\" :key=\"index\" @click=\"historyClickFn(str)\">{{str}}</span>\r\n        </div>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { sousuolianxiangjianyi } from '@/api/user'\r\nimport { getStorage, setStorage } from '@/utils/storage'\r\nexport default {\r\n  name: 'SearchIndex',\r\n  data () {\r\n    return {\r\n      kw: '', // 搜索关键字\r\n      timer: null, // 防抖的定时器\r\n      LianXiangList: [],\r\n      history: JSON.parse(getStorage('his')) || []\r\n      // 搜索历史 有值时候就取无值时前面为假就给其赋值一个空数组\r\n    }\r\n  },\r\n  methods: {\r\n    // 输入框 - 内容实时改变触发事件方法\r\n    inputFn () {\r\n      // 防抖：延时执行逻辑代码，事件再次触发时，清除上一个定时器\r\n      if (this.kw.length === 0) {\r\n        this.LianXiangList = []\r\n      } else {\r\n        clearTimeout(this.timer)\r\n        this.timer = setTimeout(async () => {\r\n          const res = await sousuolianxiangjianyi({\r\n            theLianXiang: this.kw\r\n          })\r\n          this.LianXiangList = res.data.data.options\r\n          console.log(res)\r\n        }, 300)\r\n      }\r\n    },\r\n    lightFn (originStr, target) {\r\n      // originStr原来的字符串\r\n      // target关键字\r\n      // 字符串.replace()  替换匹配到的第一个  replaceAll() 替换全部\r\n      // 返回值: 替换后的完整字符串\r\n      // new一个正则表达式\r\n      const reg = new RegExp(target, 'ig') // i忽略大小写，g全局都匹配\r\n      // 替换后的值不能用target\r\n      // 例如: 输入框里 java,匹配回来的联想菜单Java,JAVA,jAVA用了正则全部可以匹配上都被replace换成输入框target值java\r\n      return originStr.replace(reg, (match) => {\r\n        // match就是匹配中时,原字符串里的那个字符，我们用原来的不破坏原来数据，只添加一个颜色\r\n        return `<span style=\"color:red;\">${match}</span>`\r\n      })\r\n    },\r\n    moveFn (thestr) {\r\n      // 坑 这里因为是异步任务watch还没有执行但跳转路由了，就不会执行watch,\r\n      // 我们要让watch先执行再去执行路由的跳转，解决方案可以来一个定时器包裹，让跳转最后执行\r\n      setTimeout(() => {\r\n        this.$router.push({\r\n          path: `/searchresult${thestr}`\r\n        })\r\n      }, 0)\r\n    },\r\n    // 搜索输入框回车事件\r\n    searchFn () {\r\n      if (this.kw.length > 0) {\r\n        this.history.push(this.kw)\r\n        this.moveFn(this.kw)\r\n      }\r\n    },\r\n    // 联想建议列表点击事件\r\n    suggestClickFn (a) {\r\n      this.history.push(a)\r\n      this.moveFn(a)\r\n    },\r\n    // 历史记录列表点击事件\r\n    historyClickFn (str) {\r\n      this.moveFn(str)\r\n    },\r\n    // 图标清空历史记录\r\n    delFn () {\r\n      // 这样本地保存的数据因为绑定了watch监听事件history改变导致本地的存的历史记录也会改变，\r\n      // 所以可以直接改,history数组\r\n      this.history = []\r\n    }\r\n  },\r\n  // watch侦听器使用\r\n  watch: {\r\n    history: { // 历史记录数组的改变\r\n      deep: true,\r\n      handler () {\r\n        // 立刻覆盖式的保存到本地\r\n        // ES6新增了2种引用类型(以前Array,object),(新增：Set Map)\r\n        // Set: 无序不重复的value集合体(无下角标)\r\n        // 特点: 你传入的数组类型，如果有重复元素,会自动清理掉重复元素，返回无重复的Set对象\r\n        // 注意: 如果数组里面的值是对象，比较的是对象内存地址\r\n        const theSet = new Set(this.history)\r\n        // Set类型的对象 -> 转回 -> Array数组类型\r\n        const arr = Array.from(theSet)\r\n        setStorage('his', JSON.stringify(arr))\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search-header{\r\n    height: 46px;\r\n    display: flex;\r\n    align-items: center;\r\n    background-color: pink;\r\n    overflow: hidden;\r\n    // 后退按钮\r\n    .goback{\r\n        padding-left: 14px;\r\n    }\r\n    // 搜索组件\r\n    .van-search{\r\n        flex: 1;\r\n    }\r\n}\r\n.sugg-list{\r\n  .sugg-item{\r\n    padding: 0 15px;\r\n    border-bottom: 1px solid #f8f8f8;\r\n    font-size: 14px;\r\n    line-height: 50px;\r\n    // 实现省略号的三行代码\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n}\r\n// 搜索历史\r\n.search-icon{\r\n  font-size: 16px;\r\n  line-height: inherit;\r\n}\r\n.history-list{\r\n  padding: 0 10px;\r\n  .history-item{\r\n    display: inline-block;\r\n    font-size: 12px;\r\n    padding: 8px 14px;\r\n    background-color: #efefef;\r\n    margin: 10px 8px 0px 8px;\r\n    border-radius: 10px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0abdddfa&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=0abdddfa&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0abdddfa\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar global = require('../internals/global');\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar toObject = require('../internals/to-object');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar isConstructor = require('../internals/is-constructor');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar Array = global.Array;\n\n// `Array.from` method implementation\n// https://tc39.es/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var IS_CONSTRUCTOR = isConstructor(this);\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined);\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod && !(this == Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = getIterator(O, iteratorMethod);\n    next = iterator.next;\n    result = IS_CONSTRUCTOR ? new this() : [];\n    for (;!(step = call(next, iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = lengthOfArrayLike(O);\n    result = IS_CONSTRUCTOR ? new this(length) : Array(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n","var anObject = require('../internals/an-object');\nvar iteratorClose = require('../internals/iterator-close');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator, 'throw', error);\n  }\n};\n","var $ = require('../internals/export');\nvar from = require('../internals/array-from');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  // eslint-disable-next-line es/no-array-from -- required for testing\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.es/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$router","back","directives","name","rawName","inputFn","searchFn","model","value","callback","$$v","kw","trim","expression","length","_l","a","index","key","domProps","_s","lightFn","suggestClickFn","scopedSlots","_u","fn","delFn","proxy","str","historyClickFn","_v","staticRenderFns","data","timer","LianXiangList","history","JSON","parse","methods","clearTimeout","setTimeout","sousuolianxiangjianyi","theLianXiang","res","console","originStr","target","replace","reg","moveFn","thestr","path","push","watch","deep","handler","setStorage","stringify","arr","component","global","bind","call","toObject","callWithSafeIterationClosing","isArrayIteratorMethod","isConstructor","lengthOfArrayLike","createProperty","getIterator","getIteratorMethod","Array","module","exports","arrayLike","O","IS_CONSTRUCTOR","argumentsLength","arguments","mapfn","undefined","mapping","result","step","iterator","next","iteratorMethod","done","anObject","iteratorClose","ENTRIES","error","$","from","checkCorrectnessOfIteration","INCORRECT_ITERATION","iterable","stat","forced"],"sourceRoot":""}