{"version":3,"file":"js/323.b5136e43.js","mappings":"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","sources":["webpack://toutiao-m/./src/views/Home/index.vue?f4eb","webpack://toutiao-m/./src/views/Home/components/ArticleList.vue?368d","webpack://toutiao-m/src/views/Home/components/ArticleList.vue","webpack://toutiao-m/./src/views/Home/components/ArticleList.vue?bac8","webpack://toutiao-m/./src/views/Home/components/ArticleList.vue","webpack://toutiao-m/./src/views/Home/ChanneIEdit.vue?8c2c","webpack://toutiao-m/src/views/Home/ChanneIEdit.vue","webpack://toutiao-m/./src/views/Home/ChanneIEdit.vue?b42b","webpack://toutiao-m/./src/views/Home/ChanneIEdit.vue","webpack://toutiao-m/src/views/Home/index.vue","webpack://toutiao-m/./src/views/Home/index.vue?07f2","webpack://toutiao-m/./src/views/Home/index.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('van-nav-bar',{attrs:{\"fixed\":\"\"},scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('img',{staticClass:\"logo\",attrs:{\"src\":require(\"../../assets/logo.png\"),\"alt\":\"\"}})]},proxy:true},{key:\"right\",fn:function(){return [_c('van-icon',{staticClass:\"icon\",attrs:{\"name\":\"search\",\"size\":\"0.48rem\"},on:{\"click\":_vm.moveSearchPageFn}})]},proxy:true}])})],1),_c('div',[_c('van-tabs',{attrs:{\"animated\":\"\",\"sticky\":\"\",\"offset-top\":\"1.125rem\"},on:{\"change\":_vm.channelChangeFn},model:{value:(_vm.channel),callback:function ($$v) {_vm.channel=$$v},expression:\"channel\"}},_vm._l((_vm.userChannelList),function(obj){return _c('van-tab',{key:obj.id,attrs:{\"title\":obj.name,\"name\":obj.id}},[_c('ArticleList',{attrs:{\"channel\":_vm.channel}})],1)}),1),_c('van-icon',{staticClass:\"moreChannels\",attrs:{\"name\":\"plus\",\"size\":\"0.37333334rem\"},on:{\"click\":_vm.plusClickFn}})],1),_c('van-popup',{staticClass:\"channle_popup\",attrs:{\"get-container\":\"body\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('ChanneIEdit',{ref:\"editRef\",attrs:{\"userList\":_vm.userChannelList,\"allList\":_vm.unCheckChanneList},on:{\"addchannelEV\":_vm.addchannelFn,\"removechannelEV\":_vm.removechannelFn,\"closeEv\":_vm.closeFn},model:{value:(_vm.channel),callback:function ($$v) {_vm.channel=$$v},expression:\"channel\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-pull-refresh',{on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"immediate-check\":false,\"offset\":\"50\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.wenzhanglist),function(alt){return _c('ArticleTtem',{key:alt.art_id,attrs:{\"alt\":alt},on:{\"disLikeEV\":_vm.disLikeFn,\"reportEV\":_vm.reportFn},nativeOn:{\"click\":function($event){return _vm.tiaozhuanwenzhnagxinagqing(alt.art_id)}}})}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <van-pull-refresh v-model=\"isLoading\" @refresh=\"onRefresh\">\r\n    <van-list\r\n      v-model=\"loading\"\r\n      :finished=\"finished\"\r\n      finished-text=\"没有更多了\"\r\n      @load=\"onLoad\"\r\n      :immediate-check=\"false\"\r\n      offset=\"50\"\r\n    >\r\n      <ArticleTtem\r\n        v-for=\"alt in wenzhanglist\"\r\n        :key=\"alt.art_id\"\r\n        :alt=\"alt\"\r\n        @disLikeEV=\"disLikeFn\"\r\n        @reportEV=\"reportFn\"\r\n        @click.native=\"tiaozhuanwenzhnagxinagqing(alt.art_id)\"\r\n      ></ArticleTtem>\r\n    </van-list>\r\n    </van-pull-refresh>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ArticleTtem from '../../../components/ArticleItem.vue'\r\nimport { huoquwenzhangxinwentuijian, dislikeArticleAPI, reportArticleAPI } from '@/api/user'\r\nimport Vue from 'vue'\r\nimport Notify from '@/ui/Notify'\r\nVue.use(Notify)\r\nexport default {\r\n  data () {\r\n    return {\r\n      wenzhanglist: [],\r\n      loading: false, // 底部加载状态\r\n      finished: false, // 数据是否全部加载完成\r\n      thetime: new Date().getTime(),\r\n      isLoading: true\r\n    }\r\n  },\r\n  props: ['channel'],\r\n  async created () {\r\n    // 文章列表\r\n    this.getArticleListFn()\r\n  },\r\n  methods: {\r\n    // 专门负责发送请求\r\n    async getArticleListFn () {\r\n      const res2 = await huoquwenzhangxinwentuijian({\r\n        channel_id: this.channel,\r\n        timestamp: this.thetime // 时间戳\r\n      })\r\n      console.log(res2)\r\n      this.wenzhanglist = [...this.wenzhanglist, ...res2.data.data.results]\r\n      this.thetime = res2.data.data.pre_timestamp\r\n      this.loading = false\r\n      if (res2.data.data.results.pre_timestamp === null) {\r\n        this.finished = true\r\n      }\r\n      this.isLoading = false\r\n    },\r\n    // 底部加载\r\n    async onLoad () {\r\n      this.getArticleListFn()\r\n    },\r\n    // 顶部刷新\r\n    async onRefresh () {\r\n      this.wenzhanglist = []\r\n      this.thetime = new Date().getTime()\r\n      this.getArticleListFn()\r\n    },\r\n    // 反馈不感兴趣\r\n    async disLikeFn (id) {\r\n      await dislikeArticleAPI({\r\n        artId: id\r\n      })\r\n      // res里面没有什么有用的信息，所以await往下放行,就证明请求和响应成功的，反馈成功\r\n      // console.log(res)\r\n      Notify({ type: 'success', message: '反馈成功' })\r\n    },\r\n    async reportFn (id, value) {\r\n      await reportArticleAPI({\r\n        artId: id,\r\n        type: value\r\n      })\r\n      Notify({ type: 'success', message: '举报成功' })\r\n    },\r\n    // 点击跳转文章详情\r\n    tiaozhuanwenzhnagxinagqing (id) {\r\n      this.$router.push({\r\n        path: `/articledetail?art_id=${id}`\r\n      })\r\n    }\r\n  },\r\n  components: {\r\n    ArticleTtem\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleList.vue?vue&type=template&id=62f9d2c8&scoped=true&\"\nimport script from \"./ArticleList.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62f9d2c8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"频道管理\"},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"cross\",\"size\":\"0.37333334rem\",\"color\":\"white\"},on:{\"click\":_vm.closeFn}})]},proxy:true}])}),_c('div',{staticClass:\"my-channel-box\"},[_c('div',{staticClass:\"channel-title\"},[_c('span',[_vm._v(\"我的频道 \"),_c('span',{staticClass:\"small-title\"},[_vm._v(\" 点击\"+_vm._s(_vm.isEdit?'删除':'进入')+\"频道 \")])]),_c('span',{on:{\"click\":_vm.bianjidianji}},[_vm._v(_vm._s(_vm.isEdit?'完成':'删除'))])]),_c('van-row',{attrs:{\"type\":\"flex\"}},_vm._l((_vm.userList),function(obj){return _c('van-col',{key:obj.id,attrs:{\"span\":\"6\"},on:{\"click\":function($event){return _vm.wodepindaoshanchuFn(obj)}}},[_c('div',{staticClass:\"channel-item van-hairline--surround\"},[_vm._v(\" \"+_vm._s(obj.name)+\" \"),_c('van-badge',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEdit && obj.id!==0),expression:\"isEdit && obj.id!==0\"}],staticClass:\"cross-badge xiaochuhengse\",attrs:{\"color\":\"transparnet\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('van-icon',{staticClass:\"badge-icon\",attrs:{\"name\":\"cross\",\"color\":\"#cfcfcf\",\"size\":\"0.32rem\"}})]},proxy:true}],null,true)})],1)])}),1)],1),_c('div',{staticClass:\"more-channel-box\"},[_vm._m(0),_c('van-row',{attrs:{\"type\":\"flex\"}},_vm._l((_vm.allList),function(obj){return _c('van-col',{key:obj.id,attrs:{\"span\":\"6\"},on:{\"click\":function($event){return _vm.moreFn(obj)}}},[_c('div',{staticClass:\"channel-item van-hairline--surround\"},[_vm._v(_vm._s(obj.name)+\" \")])])}),1)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"channel-title\"},[_c('span',[_vm._v(\"点击添加更多频道\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n      <!-- 弹出层头部区域 -->\r\n      <van-nav-bar title=\"频道管理\">\r\n          <template #right>\r\n              <van-icon name=\"cross\" size=\"0.37333334rem\" color=\"white\" @click=\"closeFn\" />\r\n          </template>\r\n      </van-nav-bar>\r\n      <!-- 我的频道 -->\r\n      <div class=\"my-channel-box\">\r\n          <div class=\"channel-title\">\r\n              <span>我的频道\r\n                  <span class=\"small-title\">\r\n点击{{isEdit?'删除':'进入'}}频道\r\n                  </span>\r\n              </span>\r\n              <span @click=\"bianjidianji\">{{isEdit?'完成':'删除'}}</span>\r\n          </div>\r\n          <!-- 我的频道列表 -->\r\n          <van-row type=\"flex\">\r\n              <van-col span=\"6\" v-for=\"obj in userList\" :key=\"obj.id\" @click=\"wodepindaoshanchuFn(obj)\">\r\n                  <div class=\"channel-item van-hairline--surround\">\r\n                      {{obj.name}}\r\n                      <!-- 删除的徽标 -->\r\n                      <van-badge color=\"transparnet\" class=\"cross-badge xiaochuhengse\"  v-show=\"isEdit && obj.id!==0\">\r\n                          <template #content>\r\n                       <van-icon name=\"cross\" class=\"badge-icon\" color=\"#cfcfcf\" size=\"0.32rem\"/>\r\n                          </template>\r\n                      </van-badge>\r\n                  </div>\r\n              </van-col>\r\n          </van-row>\r\n      </div>\r\n      <!-- 更多频道 -->\r\n      <div class=\"more-channel-box\">\r\n          <div class=\"channel-title\">\r\n              <span>点击添加更多频道</span>\r\n          </div>\r\n          <!-- 更多频道列表 -->\r\n          <van-row type=\"flex\">\r\n              <van-col span=\"6\" v-for=\"obj in allList\" :key=\"obj.id\" @click=\"moreFn(obj)\">\r\n                  <div class=\"channel-item van-hairline--surround\">{{obj.name}}\r\n                  </div>\r\n              </van-col>\r\n          </van-row>\r\n      </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    userList: Array,\r\n    allList: Array\r\n  },\r\n  data () {\r\n    return {\r\n      isEdit: false\r\n    }\r\n  },\r\n  methods: {\r\n    bianjidianji () {\r\n      this.isEdit = !this.isEdit\r\n    },\r\n    moreFn (obj) {\r\n      if (this.isEdit) {\r\n        this.$emit('addchannelEV', obj)\r\n      }\r\n    },\r\n    wodepindaoshanchuFn (obj) {\r\n      if (this.isEdit) {\r\n        if (obj.id !== 0) { this.$emit('removechannelEV', obj) }\r\n      } else {\r\n        this.$emit('closeEv')// 关闭弹出层\r\n        this.$emit('input', obj.id) // 父组件绑定的v-model会默认绑定一个input事件\r\n      }\r\n    },\r\n    // 关闭弹出层方法\r\n    closeFn () {\r\n      this.$emit('closeEv')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.van-popup,\r\n.popup-container{\r\n    background-color: transparent;\r\n    height: 100%;\r\n    width: 100%;\r\n}\r\n.popup-container{\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n.pop-header{\r\n    height: 90px;\r\n    background-color: #007bff;\r\n    color: white;\r\n    text-align: center;\r\n    font-size: 14px;\r\n    position: relative;\r\n    .title{\r\n        width: 100%;\r\n        position: absolute;\r\n        bottom: 15px;\r\n    }\r\n}\r\n.pop-body{\r\n    flex: 1;\r\n    overflow: scroll;\r\n    padding: 8px;\r\n    background-color: white;\r\n}\r\n.my-channel-box,\r\n.more-channel-box{\r\n    .channel-title{\r\n        display: flex;\r\n        justify-content: space-between;\r\n        font-size: 14px;\r\n        line-height: 28px;\r\n        padding: 0 6px;\r\n    }\r\n}\r\n.channel-item{\r\n    font-size: 12px;\r\n    text-align: center;\r\n    line-height: 36px;\r\n    background-color: #fafafa;\r\n    margin: 5px;\r\n}\r\n// 删除的徽标\r\n.cross-badge{\r\n    position: absolute;\r\n    right: -3px;\r\n    top: 0;\r\n    border: none;\r\n}\r\n// 提示文字\r\n.small-title{\r\n    font-size: 10px;\r\n    color: gray;\r\n}\r\n.xiaochuhengse{\r\n    background-color:white;\r\n    padding:0;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChanneIEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChanneIEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChanneIEdit.vue?vue&type=template&id=b0fce906&scoped=true&\"\nimport script from \"./ChanneIEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./ChanneIEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChanneIEdit.vue?vue&type=style&index=0&id=b0fce906&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b0fce906\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n<div>\r\n  <!-- 头部导航 -->\r\n<div>\r\n  <van-nav-bar fixed>\r\n    <template v-slot:left>\r\n<img class=\"logo\" src=\"../../assets/logo.png\" alt=\"\">\r\n    </template>\r\n    <template v-slot:right>\r\n      <!-- 坑 因为是行内样式 插件是不会自动转换为rem无法适配18px/37.5每份=0.48为rem值  -->\r\n<van-icon name=\"search\" size=\"0.48rem\"  class=\"icon\" @click=\"moveSearchPageFn\"/>\r\n    </template>\r\n  </van-nav-bar>\r\n</div>\r\n<!-- tab栏导航 -->\r\n<div>\r\n  <van-tabs v-model=\"channel\"  animated sticky offset-top=\"1.125rem\" @change=\"channelChangeFn\">\r\n    <!-- 原offset-top=\"1.226667rem\" -->\r\n  <van-tab :title=\" obj.name\" v-for=\"obj in userChannelList\" :key=\"obj.id\" :name=\"obj.id\">\r\n    <ArticleList :channel=\"channel\"></ArticleList>\r\n  </van-tab>\r\n</van-tabs>\r\n  <van-icon name=\"plus\" size=\"0.37333334rem\" class=\"moreChannels\" @click=\"plusClickFn\"/>\r\n</div>\r\n<van-popup v-model=\"show\"\r\n    get-container=\"body\"\r\n    class=\"channle_popup\"\r\n>\r\n<ChanneIEdit :userList=\"userChannelList\"\r\n:allList=\"unCheckChanneList\"\r\n@addchannelEV=\"addchannelFn\"\r\n@removechannelEV=\"removechannelFn\"\r\n@closeEv=\"closeFn\" ref=\"editRef\"\r\nv-model=\"channel\"\r\n></ChanneIEdit>\r\n</van-popup>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { yonghuguanzhuliebiao, huoquyonghusuoyoupindaoliebiao, genghuangyonghuxuanzedepindao, shanchuyonghuzhidingdepindao } from '@/api/user'\r\nimport ArticleList from './components/ArticleList.vue'\r\nimport ChanneIEdit from './ChanneIEdit.vue'\r\nexport default {\r\n  name: 'IndexHome',\r\n  data () {\r\n    return {\r\n      channel: 0,\r\n      userChannelList: [], // 用户频道列表\r\n      allChannelList: [], // 所有频道列表\r\n      wenzhanglist: [],\r\n      show: false,\r\n      channelScrollTobj: {}// 保存每个频道的滚动位置\r\n    }\r\n  },\r\n  activated () {\r\n    window.addEventListener('scroll', this.scrollFn)\r\n    // window和document,监听网页滚动事件\r\n    // html标签获取scrollTop滚动的距离,和设置滚动的位置\r\n    // 切换回来,设置滚动条位置\r\n    document.documentElement.scrollTop = this.$route.meta.scrollT\r\n  },\r\n  deactivated () {\r\n    window.removeEventListener('scroll', this.scrollFn)\r\n  },\r\n  methods: {\r\n    // 切换频道触发的事件\r\n    channelChangeFn () {\r\n      this.$nextTick(() => {\r\n        document.documentElement.scrollTop = this.channelScrollTobj[this.channel]\r\n      })\r\n    },\r\n    // +点击方法\r\n    plusClickFn () {\r\n      this.show = true\r\n    },\r\n    async addchannelFn (a) {\r\n      this.userChannelList.push(a)\r\n      const newArr = this.userChannelList.filter(obj => obj.id !== 0)\r\n      const theNewArr = newArr.map((obj, index) => {\r\n        const newObj = { ...obj } // 拷贝(浅拷贝)\r\n        delete newObj.name\r\n        newObj.seq = index\r\n        return newObj\r\n      })\r\n      await genghuangyonghuxuanzedepindao({\r\n        channels: theNewArr\r\n      })\r\n    },\r\n    async removechannelFn (obj) {\r\n      const index = this.userChannelList.findIndex(a => a.id === obj.id)\r\n      this.userChannelList.splice(index, 1)\r\n      await shanchuyonghuzhidingdepindao({\r\n        channelID: obj.id\r\n      })\r\n    },\r\n    closeFn () {\r\n      this.show = false\r\n      this.$refs.editRef.isEdit = false\r\n    },\r\n    // 首页右上角放大镜图标点击事件 ->跳转到搜索页面\r\n    moveSearchPageFn () {\r\n      // 这里的跳转一定要用push因为有返回，push是有历史纪录的\r\n      this.$router.push('/search')\r\n    },\r\n    scrollFn () {\r\n      this.$route.meta.scrollT = document.documentElement.scrollTop\r\n      this.channelScrollTobj[this.channel] = document.documentElement.scrollTop\r\n    }\r\n  },\r\n  components: {\r\n    ArticleList,\r\n    ChanneIEdit\r\n  },\r\n  async created () {\r\n    // 用户频道列表\r\n    const res = await yonghuguanzhuliebiao()\r\n    this.userChannelList = res.data.data.channels\r\n    // 所有频道列表\r\n    const res2 = await huoquyonghusuoyoupindaoliebiao()\r\n    this.allChannelList = res2.data.data.channels\r\n  },\r\n  computed: {\r\n    unCheckChanneList () {\r\n    //   const newArr = this.allChannelList.filter(bigObj => {\r\n    //     const index = this.userChannelList.findIndex(smallObj => {\r\n    //       return smallObj.id === bigObj.id\r\n    //     })\r\n    //     if (index > -1) {\r\n    //       return false\r\n    //     } else {\r\n    //       return true\r\n    //     }\r\n    //   })\r\n    //   return newArr\r\n    // 极简写法\r\n      return this.allChannelList.filter(bigObj => (this.userChannelList.findIndex(smallObj => smallObj.id === bigObj.id)) === -1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.logo{\r\n  width: 100px;\r\n  height: 30px;\r\n}\r\n.van-nav-bar .van-icon{\r\n  color:#fff;\r\n}\r\n.van-tabs{\r\n  padding-top: 46px;\r\n}\r\n// 设置 tabs容器样式\r\n/deep/ .van-tabs__wrap{\r\n  padding-right: 30px;\r\n  background-color: #fff;\r\n}\r\n// 设置小图标样式\r\n.moreChannels {\r\n  position: fixed;\r\n  top: 62px;\r\n  right: 8px;\r\n  z-index: 999;\r\n}\r\n.channle_popup{\r\n  width: 100vw;\r\n  height: 100vh;\r\n}\r\n// 如果想给100%，要先给html和nody设置100%\r\n// vw和vh是css3新出的单位参考浏览器窗口百分比\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3dcdb746&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=3dcdb746&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3dcdb746\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","scopedSlots","_u","key","fn","staticClass","proxy","on","moveSearchPageFn","channelChangeFn","model","value","callback","$$v","channel","expression","_l","obj","id","name","plusClickFn","show","ref","userChannelList","unCheckChanneList","addchannelFn","removechannelFn","closeFn","staticRenderFns","onRefresh","isLoading","finished","onLoad","loading","alt","art_id","disLikeFn","reportFn","nativeOn","$event","tiaozhuanwenzhnagxinagqing","Vue","data","wenzhanglist","thetime","Date","getTime","props","async","getArticleListFn","methods","res2","channel_id","timestamp","console","log","results","pre_timestamp","artId","Notify","type","message","$router","push","path","components","ArticleTtem","component","_v","_s","isEdit","bianjidianji","wodepindaoshanchuFn","directives","rawName","_m","moreFn","userList","Array","allList","$emit","allChannelList","channelScrollTobj","activated","window","addEventListener","scrollFn","document","documentElement","scrollTop","$route","meta","scrollT","deactivated","removeEventListener","$nextTick","a","newArr","filter","theNewArr","map","index","newObj","seq","channels","findIndex","splice","channelID","$refs","editRef","ArticleList","ChanneIEdit","res","computed","bigObj"],"sourceRoot":""}