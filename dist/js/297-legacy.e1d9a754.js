(self["webpackChunktoutiao_m"]=self["webpackChunktoutiao_m"]||[]).push([[297],{974:function(t,n,i){"use strict";i.r(n),i.d(n,{default:function(){return f}});var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",[i("div",{staticClass:"search-header"},[i("van-icon",{staticClass:"goback",attrs:{name:"arrow-left",color:"white",size:"0.48rem"},on:{click:function(n){return t.$router.back()}}}),i("van-search",{directives:[{name:"fofo",rawName:"v-fofo"}],attrs:{placeholder:"请输入搜索关键词",background:"pink",shape:"round"},on:{input:t.inputFn,search:t.searchFn},model:{value:t.kw,callback:function(n){t.kw="string"===typeof n?n.trim():n},expression:"kw"}})],1),0!==t.kw.length?i("div",{staticClass:"sugg-list"},t._l(t.LianXiangList,(function(n,e){return i("div",{key:e,staticClass:"sugg-item",domProps:{innerHTML:t._s(t.lightFn(n,t.kw))},on:{click:function(i){return t.suggestClickFn(n)}}})})),0):i("div",{staticClass:"search-history"},[i("van-cell",{attrs:{title:"搜索历史"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[i("van-icon",{staticClass:"search-icon",attrs:{name:"delete"},on:{click:t.delFn}})]},proxy:!0}])}),i("div",{staticClass:"history-list"},t._l(t.history,(function(n,e){return i("span",{key:e,staticClass:"history-item",on:{click:function(i){return t.historyClickFn(n)}}},[t._v(t._s(n))])})),0)],1)])},r=[],s=i(6198),a=(i(4603),i(8450),i(4916),i(8386),i(9714),i(5306),i(1539),i(189),i(8783),i(3948),i(1038),i(8862),i(8975),i(32)),o=i(5922),c={name:"SearchIndex",data:function(){return{kw:"",timer:null,LianXiangList:[],history:JSON.parse((0,o.cF)("his"))||[]}},methods:{inputFn:function(){var t=this;0===this.kw.length?this.LianXiangList=[]:(clearTimeout(this.timer),this.timer=setTimeout((0,s.Z)(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,a.TV)({theLianXiang:t.kw});case 2:i=n.sent,t.LianXiangList=i.data.data.options,console.log(i);case 5:case"end":return n.stop()}}),n)}))),300))},lightFn:function(t,n){var i=new RegExp(n,"ig");return t.replace(i,(function(t){return'<span style="color:red;">'.concat(t,"</span>")}))},moveFn:function(t){var n=this;setTimeout((function(){n.$router.push({path:"/searchresult".concat(t)})}),0)},searchFn:function(){this.kw.length>0&&(this.history.push(this.kw),this.moveFn(this.kw))},suggestClickFn:function(t){this.history.push(t),this.moveFn(t)},historyClickFn:function(t){this.moveFn(t)},delFn:function(){this.history=[]}},watch:{history:{deep:!0,handler:function(){var t=new Set(this.history),n=Array.from(t);(0,o.po)("his",JSON.stringify(n))}}}},u=c,h=i(3736),l=(0,h.Z)(u,e,r,!1,null,"0abdddfa",null),f=l.exports},8457:function(t,n,i){"use strict";var e=i(7854),r=i(9974),s=i(6916),a=i(7908),o=i(3411),c=i(7659),u=i(4411),h=i(6244),l=i(6135),f=i(8554),d=i(1246),v=e.Array;t.exports=function(t){var n=a(t),i=u(this),e=arguments.length,p=e>1?arguments[1]:void 0,k=void 0!==p;k&&(p=r(p,e>2?arguments[2]:void 0));var g,m,w,y,F,C,x=d(n),L=0;if(!x||this==v&&c(x))for(g=h(n),m=i?new this(g):v(g);g>L;L++)C=k?p(n[L],L):n[L],l(m,L,C);else for(y=f(n,x),F=y.next,m=i?new this:[];!(w=s(F,y)).done;L++)C=k?o(y,p,[w.value,L],!0):w.value,l(m,L,C);return m.length=L,m}},3411:function(t,n,i){var e=i(9670),r=i(9212);t.exports=function(t,n,i,s){try{return s?n(e(i)[0],i[1]):n(i)}catch(a){r(t,"throw",a)}}},1038:function(t,n,i){var e=i(2109),r=i(8457),s=i(7072),a=!s((function(t){Array.from(t)}));e({target:"Array",stat:!0,forced:a},{from:r})}}]);
//# sourceMappingURL=297-legacy.e1d9a754.js.map